{"version":3,"sources":["../index1.js"],"names":["Rating","el","options","$","isPlainObject","_default","mode","num","readOnly","_mode","half","whole","$el","$item","find","opts","extend","addHalf","isHalf","init","prototype","LightOn","bindEvent","_num","_this","_type","parseInt","lingWhole","linghtHalf","each","index","addClass","removeClass","_halftype","eq","on","e","window","event","_index","pageX","offsetLeft","offsetWidth"],"mappings":"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","file":"index1.js","sourcesContent":["(function () {\r\n//    构造函数实例化对象\r\n    let Rating = function (el, options) {\r\n        // 构造函数\r\n\r\n        if (!$.isPlainObject(options)) {\r\n            // 判断用户输入的是否是纯粹的对象\r\n            throw '请输入合法的配置'\r\n        }\r\n        // 配置默认参数\r\n        let _default = {\r\n            mode: 'whole', // 表示点亮星星的模式  半颗或者整颗（half&&whole）\r\n            num: 2, // 默认点亮两颗星星\r\n            readOnly: false, // 是否允许用户进行操作 默认是允许\r\n        };\r\n\r\n        this._mode = { // 内置两种模式\r\n            half: 'half',\r\n            whole: 'whole'\r\n        }\r\n\r\n        this.$el = $(el);\r\n        this.$item = this.$el.find('.rating-item');\r\n        this.opts = $.extend({}, _default, options);\r\n        this.addHalf = 1; // 是否显示半颗星星 1 表示整颗 0.5 表示半颗\r\n\r\n\r\n        // 选择显示模式\r\n        switch (this._mode[this.opts.mode]) {\r\n            case 'half':\r\n                this.isHalf = true;\r\n                break;\r\n            case 'whole':\r\n                this.isHalf = false\r\n                break;\r\n            default:\r\n                this.isHalf = false\r\n        }\r\n\r\n        // 初始化函数\r\n        this.init();\r\n\r\n    };\r\n\r\n    // 初始化实例对象\r\n    Rating.prototype.init = function () {\r\n        this.LightOn(this.opts.num); // 初始化点亮\r\n\r\n        if (!this.opts.readOnly) {\r\n            this.bindEvent(); // 绑定用户交互操作\r\n        }\r\n\r\n    };\r\n\r\n    // 点亮星星\r\n    Rating.prototype.LightOn = function (num) {\r\n        // 点亮整颗星星\r\n        let _num,\r\n            _this=this,\r\n            _type = (num === parseInt(num));\r\n\r\n        _num = _type ? num : parseInt(num);\r\n\r\n        lingWhole(_num);\r\n        linghtHalf(_type,_num);\r\n\r\n        function lingWhole(num) {\r\n            // 点亮整颗星星\r\n            _this.$item.each(function (index) {\r\n                if (index < num) {\r\n                    $(this).addClass('active')\r\n                } else {\r\n                    $(this).removeClass('active')\r\n                }\r\n                $(this).removeClass('half')\r\n            });\r\n        }\r\n\r\n        function linghtHalf(_halftype, num) {\r\n            // 点亮半颗星星\r\n            if (_halftype) {\r\n                // 表明是整颗星星\r\n                _this.$item.eq(num - 1).removeClass('half')\r\n                    .addClass('active')\r\n            } else {\r\n                _this.$item.eq(num).addClass('half')\r\n            }\r\n        }\r\n\r\n\r\n    };\r\n\r\n    // 绑定用户的交互事件\r\n    Rating.prototype.bindEvent = function () {\r\n        let _this = this;\r\n\r\n        _this.$el\r\n            .on('click', '.rating-item', function () {\r\n                _this.opts.num = $(this).index() + _this.addHalf;\r\n                _this.LightOn(_this.opts.num)\r\n            })\r\n            .on('mouseleave', function () {\r\n                _this.LightOn(_this.opts.num)\r\n            })\r\n\r\n        if (this.isHalf) {\r\n            _this.$el\r\n                .on('mousemove', '.rating-item', function (e) {\r\n                    e = e || window.event;\r\n                    let _index;\r\n                    if (e.pageX - this.offsetLeft < this.offsetWidth / 2) {\r\n                        // 显示半颗\r\n                        _this.addHalf = 0.5;\r\n                    } else {\r\n                        _this.addHalf = 1;\r\n                    }\r\n                    _index = $(this).index() + _this.addHalf;\r\n                    _this.LightOn(_index)\r\n                })\r\n\r\n        } else {\r\n            _this.$el\r\n                .on('mouseover', '.rating-item', function () {\r\n                    let _index = $(this).index() + _this.addHalf;\r\n                    _this.LightOn(_index)\r\n                })\r\n        }\r\n    }\r\n\r\n    // 将构造函数注册到全局变量上去\r\n    window.Rating = Rating;\r\n})()"]}